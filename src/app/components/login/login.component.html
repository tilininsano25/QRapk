<ion-content class="ion-padding login-background">
  <ion-grid>
    <ion-row class="ion-justify-content-center">
      <ion-col size-md="8" size-sm="12">
        <ion-card class="login-card" *ngIf="!showingRegisterForm">
          <ion-card-header>
            <ion-card-title>Iniciar Sesión</ion-card-title>
            <ion-card-subtitle>Accede con tu cuenta institucional</ion-card-subtitle>
          </ion-card-header>

          <ion-card-content>
            <ion-item class="input-item">
              <ion-label position="floating">Correo Institucional</ion-label>
              <ion-input type="email" [(ngModel)]="email" required></ion-input>
            </ion-item>

            <ion-item class="input-item">
              <ion-label position="floating" class="ion-text">Contraseña</ion-label>
              <ion-input [type]="passwordType" [(ngModel)]="password" required></ion-input>
              <ion-button fill="clear" slot="end" (click)="togglePasswordVisibility()">
                <ion-icon [name]="passwordIcon"></ion-icon>
              </ion-button>
            </ion-item>
                        <div class="error-container">
              <ion-text color="danger" *ngIf="loginError">{{loginError}}</ion-text>
            </div>
            <ion-item lines="none" class="remember-me-item">
              <ion-label>Recordar usuario</ion-label>
              <ion-toggle [(ngModel)]="rememberMe"></ion-toggle>
            </ion-item>

            <ion-button expand="full" color="primary" (click)="login()">Ingresar</ion-button>
            <ion-button expand="full" fill="outline" routerLink="/reset-password">¿Olvidó su contraseña?</ion-button>
            <ion-button expand="full" fill="outline" (click)="showRegisterForm()">¿No tienes una cuenta?</ion-button>
          </ion-card-content>
        </ion-card>

        <ion-card class="register-card" *ngIf="showingRegisterForm">
          <ion-card-header>
            <ion-card-title>Registro</ion-card-title>
          </ion-card-header>

          <ion-card-content>
            <ion-item>
              <ion-label position="floating">Correo</ion-label>
              <ion-input type="email" [(ngModel)]="registerData.email" required></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Contraseña</ion-label>
              <ion-input type="password" [(ngModel)]="registerData.password" required></ion-input>
              <ion-button fill="clear" slot="end" (click)="togglePasswordVisibility()"> </ion-button>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Nombre</ion-label>
              <ion-input type="text" [(ngModel)]="registerData.nombre" required></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Apellido</ion-label>
              <ion-input type="text" [(ngModel)]="registerData.apellido" required></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Universidad</ion-label>
              <ion-input type="text" [(ngModel)]="registerData.universidad" required></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Carrera</ion-label>
              <ion-input type="text" [(ngModel)]="registerData.carrera" required></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Sede</ion-label>
              <ion-input type="text" [(ngModel)]="registerData.sede" required></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Pais</ion-label>
              <ion-input type="text" [(ngModel)]="registerData.pais" required></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Rut</ion-label>
              <ion-input type="text" [(ngModel)]="registerData.rut" required></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Seccion</ion-label>
              <ion-input type="text" [(ngModel)]="registerData.seccion" required></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Jornada</ion-label>
              <ion-input type="text" [(ngModel)]="registerData.jornada" required></ion-input>
            </ion-item>
            

            
            <div class="error-container">
              <ion-text color="danger" *ngIf="registerError">{{registerError}}</ion-text>
            </div>
            
            <ion-button expand="full" color="primary" (click)="register()">Registrarse</ion-button>
            <ion-button expand="full" fill="outline" (click)="showLoginForm()">Volver al inicio de sesión</ion-button>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>